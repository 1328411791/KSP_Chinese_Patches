// 修复：原合同包在玩家安装了Kopernicus的情况下无法满足太阳能电池板要求的问题。
// 该问题导致本合同包中最基本的几个合同不可用或无法完成，故不建议禁用此修复。

// 此修复已向mod作者提交，但因为作者一直没有合并我的PR，所以在这里修复。在作者更新了mod后，应放弃此修复
// （若不放弃，只会使太阳能电池板的相关要求多显示一行，但不会影响游戏正常游玩）

@CONTRACT_TYPE[StationCoreCombined]:NEEDS[ContractPacks/KerbinSpaceStation]:FIRST
{
    @PARAMETER[NewStation]
    {
        @PARAMETER[RTGSolar]
        {
            @PARAMETER:HAS[#partModule[ModuleDeployableSolarPanel]]
            {
                @name = PartValidationSolar
            }
            @PARAMETER:HAS[#partModule[ModuleGenerator]]
            {
                @name = PartValidationRTG
            }
            @PARAMETER:HAS[#partModule[KopernicusSolarPanel]]:NEEDS[Kopernicus]
            {
                @name = PartValidationSolar
            }
        }
    }
}
@CONTRACT_TYPE[ReplaceFaultyModule]:NEEDS[ContractPacks/KerbinSpaceStation]:FIRST
{
    @PARAMETER[PowerModule]
    {
        @PARAMETER[RTGSolar]
        {
            title = Have one of the following power generators
            @PARAMETER:HAS[#partModule[ModuleCurvedSolarPanel]]:NEEDS[NearFutureSolar]
            {
                @name = PartValidationNearFutureSolar
            }
            PARAMETER:NEEDS[Kopernicus]
            {
                name = PartValidationSolar
                type = PartValidation
                title = 1 or more solar panels
                hideChildren = true
                partModule = KopernicusSolarPanel
                minCount = 1
            }
        }
    }
}
@CONTRACT_TYPE[BaseCreate]:NEEDS[ContractPacks/KerbinSpaceStation]:FIRST
{
    @PARAMETER[All]
    {
        @PARAMETER[Any]
        {
            @hideChildren = false
            PARAMETER:NEEDS[Kopernicus]
            {
                name = Solar
                title = 1 or more solar panels
                type = PartValidation
                hideChildren = true
                partModule = KopernicusSolarPanel
                minCount = 1
            }
        }
    }
}
@CONTRACT_TYPE[BaseCrewRotation]:NEEDS[ContractPacks/KerbinSpaceStation]:FIRST
{
    @maxExpiry = 7
}
